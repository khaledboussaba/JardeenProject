<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

	<ui:composition template="/masterArche.xhtml">
		<ui:define name="head">
			<f:metadata>
				<f:event listener="#{mbListeTaches.init()}" type="preRenderView"></f:event>
			</f:metadata>
		</ui:define>
		<ui:define name="title">Liste tâches
			<h:outputStylesheet name="css/masterArche.css" />
		</ui:define>
		<ui:define name="contentCore">
		
		<h2>							
		<b:image name="test" style="width:80px; height:80px" value="./resources/pictures/#{mbListeTachesPlantes.plante.photo}" />
		Liste des tâches associées et planifiées </h2>
				<hr></hr>
			<b:form>
			<b:panel styleClass="pannelFormulaireTache">
				
			<b:dataTable value="#{mbListeTachesPlantes.taches}"
				var="tache" selectionMode="single" auto-update="true" ajax="true">
				<b:dataTableColumn value="#{tache.parcelle.libelleParcelle} (#{tache.parcelle.terrain.libelleTerrain})"
					label="Parcelle" />
				<b:dataTableColumn value="#{tache.plante.libellePlante}"
					label="Plante" />
				<b:dataTableColumn
					value="#{tache.libelleTache}"
					label="Tâche" />

				<b:dataTableColumn label="Date " >
					<h:outputLabel value="#{tache.dateDebutTache}">
						<f:convertDateTime pattern="dd MMMM yyyy"/>
					</h:outputLabel>	
					de &#160;
					<h:outputLabel value="#{tache.dateDebutTache}">
						 <f:convertDateTime pattern="HH"/>h
					</h:outputLabel> à &#160;						
					<h:outputLabel value="#{tache.dateFinTache}">
						 <f:convertDateTime pattern="HH"/>h
					</h:outputLabel>				
				</b:dataTableColumn>
				<b:dataTableColumn value="#{tache.nbAdherentRequis-tache.affectationsAdherents.size()}"
					label="Nbre adherent reste à affecter" />
				<b:dataTableColumn label="Volontaire" style="text-align: center;">
					<b:commandButton
						action="#{mbListeTachesPlantes.seporterVolontaire(tache)}"
						ajax="true"
						auto-update="true"
						id="btnVolontaireTache"
						icon-awesome="#{mbListeTachesPlantes.masquerButton(tache)}"
						look="none"
						style="
							background-color:#3E3F3A;
							color: white;
							"
							/>
				</b:dataTableColumn>
			</b:dataTable>
			<b:commandButton value="Retour" action="plantes.xhtml" icon-awesome="fa-reply" style-class="commandButton"/>
			</b:panel>
			</b:form>
		</ui:define>
	</ui:composition>
</html>